{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Отчёт по доставкам</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-..." crossorigin="anonymous">
</head>
<body class="p-4">
  <div class="container">
    <h1>Отчёт по доставкам</h1>
    <form id="filter-form" class="row g-3">
      <div class="col-md-3">
        <label>Модель транспорта</label>
        <select id="transport_model" class="form-select" name="transport_model">
          <option value="">Все</option>
        </select>
      </div>
      <div class="col-md-3">
        <label>Номер транспорта</label>
        <input type="text" id="transport_number" class="form-control" name="transport_number">
      </div>
      <div class="col-md-3">
        <label>Дата отправления (c)</label>
        <input type="date" id="departure_time_after" class="form-control" name="departure_time_after">
      </div>
      <div class="col-md-3">
        <label>Дата отправления (по)</label>
        <input type="date" id="departure_time_before" class="form-control" name="departure_time_before">
      </div>
      <div class="col-md-3">
        <label>Дата прибытия (c)</label>
        <input type="date" id="arrival_time_after" class="form-control" name="arrival_time_after">
      </div>
      <div class="col-md-3">
        <label>Дата прибытия (по)</label>
        <input type="date" id="arrival_time_before" class="form-control" name="arrival_time_before">
      </div>
      <div class="col-md-3">
        <label>Расстояние от (км)</label>
        <input type="number" id="distance_km_min" class="form-control" name="distance_km_min">
      </div>
      <div class="col-md-3">
        <label>Расстояние до (км)</label>
        <input type="number" id="distance_km_max" class="form-control" name="distance_km_max">
      </div>
      <div class="col-md-3">
        <label>Услуги</label>
        <select id="services" class="form-select" name="services" multiple>
        </select>
      </div>
      <div class="col-md-3">
        <label>Упаковка</label>
        <select id="packaging" class="form-select" name="packaging">
          <option value="">Все</option>
        </select>
      </div>
      <div class="col-md-3">
        <label>Статус</label>
        <select id="status" class="form-select" name="status">
          <option value="">Все</option>
        </select>
      </div>
      <div class="col-md-3">
        <label>Тип груза</label>
        <select id="cargo_type" class="form-select" name="cargo_type">
          <option value="">Все</option>
        </select>
      </div>
      <div class="col-md-3">
        <label>Тех. состояние</label>
        <select id="technical_state" class="form-select" name="technical_state">
          <option value="">Все</option>
          <option value="good">Исправно</option>
          <option value="bad">Неисправно</option>
        </select>
      </div>
      <div class="col-md-3">
        <label>Создал</label>
        <select id="created_by" class="form-select" name="created_by">
          <option value="">Все</option>
        </select>
      </div>
      <div class="col-12">
        <button type="button" id="apply-filters" class="btn btn-primary">Применить фильтры</button>
      </div>
    </form>

    <hr>

    <h2>График количества доставок по датам</h2>
    <canvas id="deliveriesChart" height="100"></canvas>

    <hr>

    <h2>Список доставок</h2>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>ID</th><th>Модель</th><th>Номер</th><th>Дата отправления</th>
          <th>Дата прибытия</th><th>Расстояние</th><th>Статус</th>
        </tr>
      </thead>
      <tbody id="deliveries-table-body">
        <!-- Заполняется JavaScript -->
      </tbody>
    </table>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-..." crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="{% static 'js/deliveries_report.js' %}"></script>
</body>
</html>
